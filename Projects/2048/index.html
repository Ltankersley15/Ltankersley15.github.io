<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>title</title>
        <style>
            #canvas{
                border:solid
            }
        </style>
  </head>
  <body>
   <canvas id="canvas" height="450" width="450"></canvas>

   <script>
       setInterval(update, 500)
       
       var upPressed = false
       var downPressed = false
       var leftPressed = false
       var rightPressed = false
       var boxes = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,]
    

       function spawnNumber(){  //handles numbers spawning

            var empties = []
            //find whether to use 2 or 4
            if(Math.floor(Math.random() * 2) === 0){
                var number = 2
            }else{
                var number = 4
            }


            for(i = 0; i < boxes.length; i++){
                if(boxes[i] === 0){
                    empties.push(i)
                }
            }
            var emtiesIndex = Math.floor(Math.random() * empties.length)

            boxes[emtiesIndex] = number
        }
    
       function update(){
           //draw box
           ctx.fillStyle = ("darkgrey");
            ctx.fillRect(0, 0, canvas.width, canvas.height)
            
           spawnNumber()

          for(var i = 0; i < 4; i++){
              
            for(var j = 0; j < 4; j++){ 
                ctx.fillStyle = ("lightgrey");
               ctx.fillRect(j * 110 + 10, i * 110 + 10, 100, 100)
               ctx.fillStyle = "black"
                ctx.font = "35px Arial" 
                ctx.fillText(boxes[j + i * 4], j * 110 + 45, i * 110 + 70)
               
            }
          }
            


                     
       }
       var canvas = document.getElementById("canvas");
       var ctx = canvas.getContext("2d");
       document.addEventListener("keydown", keydownHandler, false);
        function keydownHandler(e) {
            if(e.key === "ArrowUp"){
                upPressed = true
            }
            if(e.key === "ArrowDown"){
                downPressed = true  
            }
            if(e.key === "ArrowLeft"){
                leftPressed = true
            }
            if(e.key === "ArrowRight"){
                rightPressed = true
            }
        }
       document.addEventListener("keyup", keyupHandler, false);
         function keyupHandler(e) {
            if(e.key === "ArrowUp"){
                 upPressed = false
            }
            if(e.key === "ArrowDown"){
                downPressed = false
            }
            if(e.key === "ArrowLeft"){
                leftPressed = false
            }
            if(e.key === "ArrowRight"){
                rightPressed = false
            }

        }
        
       

   </script>
  </body>
</html>